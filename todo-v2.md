## چک‌لیست فرانت پروژه (todo-v2)

هدف: فقط پیاده‌سازی فرانت با داده‌های فیک/ماک؛ بدون بک‌اند و دیتابیس. تمرکز روی صفحات، کامپوننت‌ها، ناوبری، استیت مدیریت، و تجربه کاربری (RTL).

### ناوبری و ساختار کلی
- [x] اضافه‌کردن آیتم‌های منو: CRM، ارتباط داخلی، مارکتینگ، مالی (فاکتورها)، تنظیمات، انتخاب شرکت
- [x] نمایش نام شرکت فعال در هدر + سوییچر چندشرکتی
- [x] هماهنگی مسیرها با `app/` و ساختار موجود (Next.js app dir) + مسیرهای آینه‌ای
- [x] پشتیبانی RTL و فونت فارسی پایه (globals.css) + اصلاح اسکرول افقی سراسری
- [ ] الگوهای «خالی بودن داده»، Skeleton/Loading و Error States سراسری

### چندشرکتی (Multi-Company)
- [ ] صفحه/مودال انتخاب شرکت در ورود اولیه (با داده‌ فیک شرکت‌ها)
- [x] Context برای نگهداری `activeCompanyId` و مصرف در صفحات
- [x] فیلتر لیست‌ها بر اساس شرکت فعال (ماک‌شده)
- [x] سوییچر سریع شرکت در هدر + تأیید تغییر کانتکست

### مجوزها و نقش‌ها (فقط فرانت)
- [x] تعریف نقش‌های پایه: Admin، Manager، Staff (فیک)
- [x] ماتریس دسترسی فیک در استور: مجوز مشاهده/ایجاد/ویرایش/حذف هر ماژول
- [x] پنهان‌سازی آیتم‌های منو/دکمه‌ها بر اساس مجوز
- [x] گاردهای مسیریابی فرانت (Redirect به صفحه عدم دسترسی)

### CRM
- [x] لیست سرنخ‌ها (Leads) با فیلتر، جستجو، صفحه‌بندی (داده فیک)
- [x] جزئیات سرنخ + تایم‌لاین فعالیت‌ها (تماس، یادداشت، تسک‌ها)
- [x] کانبان مراحل فرصت‌ها (Opportunities Pipeline) با درگ‌-اند-دراپ فیک
- [x] مدیریت مخاطبین/شرکت‌ها (Contacts/Accounts) با فرم‌های اعتبارسنجی فرانت
- [ ] ایجاد/ویرایش/حذف فیک با به‌روزرسانی optimistic UI
- [ ] تگ‌گذاری، وضعیت، مالک سرنخ، یادآورها (Notifications ماک)
- [ ] ایمپورت/اکسپورت CSV فیک (خواندن/دانلود فایل بدون سرور واقعی)

### ارتباط داخلی (Intranet/Comms)
- [x] فید اعلان‌های سازمانی (اعلان‌های شرکت فعال)
- [x] پیام مستقیم (DM) و گروهی فیک: لیست گفتگوها + صفحه گفتگو
- [ ] منشن کاربران، ضمیمه فایل (ظاهر/آپلود فیک)، وضعیت خوانده‌شدن نمایشی
- [ ] نوتیفیکیشن‌های داخل برنامه (Toast/Badge) فیک

### منابع انسانی (HR) – ارتباط داخلی
- [ ] تابلو اعلانات HR (قوانین، اطلاعیه‌ها) به‌ازای شرکت فعال
- [ ] فرم‌های درون‌سازمانی ساده (درخواست تجهیزات/تیکت داخلی) فیک
- [ ] لیست و وضعیت پیگیری درخواست‌ها (فقط UI)

### مالی (فاکتورها) – فقط فرانت
- [x] لیست فاکتورها با فیلتر (تاریخ، وضعیت، مشتری، شرکت)
- [x] جزئیات فاکتور + ردیف‌ها + محاسبات مبلغ (Front-only)
- [x] وضعیت پرداخت با Badge‌ها + تایم‌لاین تغییر وضعیت فیک
- [x] ایجاد/ویرایش فاکتور فیک + پرینت/PDF ماک (دانلود HTML به PDF کلاینتی)
- [ ] لینک‌پذیری آینده به حسابداری از طریق API (Placeholder)

### مارکتینگ و تبلیغات
- [x] لیست کمپین‌ها + ایجاد/ویرایش کمپین فیک (بودجه، کانال‌ها، تاریخ‌ها)
- [x] داشبورد KPI فیک: ایمپرشن، کلیک، لید، CPA (با `components/dashboard/chart`)
- [ ] مدیریت لینک‌های UTM و ردیابی فیک
- [x] تخصیص کمپین به شرکت فعال

### تنظیمات
- [ ] پروفایل کاربری (نام، ایمیل، زبان/RTL، شرکت پیش‌فرض) – فیک
- [ ] مدیریت کاربران (فقط UI): لیست، نقش‌ها، فعال/غیرفعال
- [x] نقش‌ها و مجوزها: ویرایش ماتریس دسترسی فیک
- [ ] مدیریت شرکت‌ها (فقط UI): ایجاد/ویرایش اطلاعات پایه شرکت

### الگوهای UI/UX و کامپوننت‌ها
- [ ] استفاده از کتابخانه‌های موجود در `mobleman-tehran/components/ui/*`
- [ ] فرم‌ها با اعتبارسنجی سمت کلاینت (Zod/Yup – در صورت نیاز)
- [ ] جدول‌های قابل فیلتر/مرتب‌سازی/صفحه‌بندی (Headless + استایل)
- [ ] Kanban، Modal/Drawer، Stepper برای فرآیندها
- [ ] وضعیت‌های Empty، Loading، Error در هر صفحه اصلی
- [ ] تایپوگرافی و رنگ‌بندی هماهنگ + Dark Mode (در صورت نیاز)

### ریسپانسیو و مدرن‌سازی استایل
- [ ] تعریف Breakpoints یکتا و مرور: `tailwind.config` (xs/sm/md/lg/xl/2xl)
- [ ] گرید و لِی‌اوت ریسپانسیو: استفاده از CSS Grid/Flex با gap استاندارد
- [x] هدر و سایدبار ریسپانسیو: سایدبار Collapsible/Off-canvas در موبایل
- [x] ناوبری پایین در موبایل (Bottom Nav) برای بخش‌های پرکاربرد (اختیاری)
- [~] جدول‌ها در موبایل: کنترل اسکرول افقی (بهبود صفحه نقش‌ها انجام شد)
- [x] بستن خودکار سایدبار بعد از کلیک روی لینک در موبایل
- [x] منوی اعلان‌ها راست‌چین و عدم خروج از صفحه در موبایل/دسکتاپ
- [ ] فیلترها/جستجو در موبایل: قرارگیری در Sheet/Drawer با CTA واضح
- [ ] فرم‌های موبایل: ورودی‌های تمام‌عرض، لمس‌پذیری 44px، کیبورد-سیف
- [ ] کامپوننت چارت ریسپانسیو با نسبت تصویر و Tooltip قابل لمس
- [ ] تصاویر/کاروسل: نسبت تصویر ثابت و `loading="lazy"`
- [ ] فاصله‌گذاری مقیاس‌بندی‌شده بر اساس viewport (clamp برای فونت/Spacing)
- [ ] تست دستی روی viewportهای رایج: 360/390/414/768/1024/1440

- [ ] تعریف Design Tokens در CSS: رنگ، فاصله، رادیوس، سایه، تایپوگرافی
- [ ] به‌روزرسانی سیستم رنگ (Semantic): primary/secondary/success/warning/error/info
- [ ] هم‌خوانی RTL: آیکون‌ها/جهت فلش‌ها/کاروسل/Stepper راست‌به‌چپ
- [ ] مد تاریک کامل: توکن‌های رنگ مستقل + کنتراست متنی AA/AAA
- [ ] تایپوگرافی: مقیاس Modular، line-height مناسب متن‌های فارسی
- [ ] رادیوس و سایه‌های مدرن: رادیوس 8–12px، سایه لایه‌ای ظریف
- [ ] دکمه‌ها: اندازه‌بندی Sm/Md/Lg، حالت Loading، Disabled، Focus/Active
- [ ] ورودی‌ها و Select: Icon داخل ورودی، Help/Error، Counter طول متن
- [ ] نوار پیشرفت/اسکلتون‌ها: انیمیشن لطیف، کاهش Motion در prefers-reduced-motion
- [ ] بازخورد تعاملی: Hover/Press/Focus واضح، Micro-interaction با duration کوتاه

- [ ] دسترس‌پذیری: کنتراست رنگ، فوکوس‌رینگ، ARIA برای کامپوننت‌های سفارشی
- [ ] اندازه هدف لمسی >= 44×44px، فاصله عناصر قابل لمس مناسب
- [ ] تِرَپ فوکوس در Dialog/Drawer و بستن با Esc/Back gesture
- [ ] ترتیب تب‌خوری منطقی و قابلیت استفاده با کیبورد

- [ ] بهینه‌سازی CSS: حذف کلاس‌های بلااستفاده با Tailwind JIT/Purge
- [ ] اجتناب از !important و استفاده از توکن/Utility‌ها به‌جای استایل‌های درجا
- [ ] استفاده از `container` و `max-w-*` برای خوانایی محتوا در دسکتاپ
- [ ] انیمیشن‌ها با `transition`/`animate-*` کوتاه و بدون لگ در موبایل
- [ ] آیکون‌ها: یکپارچه‌سازی مجموعه آیکون (Lucide/Tabler) و اندازه ثابت
- [ ] دستگیره‌های کشویی/درگ: ناحیه لمس بزرگ و فیدبک بصری واضح

### مدیریت داده فیک/ماک
- [ ] تعریف پوشه `mocks/` برای JSON/Factories (شرکت‌ها، کاربران، CRM، مالی…)
- [ ] سرویس فیک دیتا (Memory) با تأخیر تصادفی برای شبیه‌سازی شبکه
- [ ] هوک‌های دیتافچینگ (مثلاً React Query یا Context ساده) – بدون وابستگی به سرور
- [ ] سناریوهای CRUD Optimistic و Rollback نمایشی

### کارایی و فنی
- [ ] کداسپلیتینگ صفحات سنگین (Charts/CRM Detail)
- [ ] استفاده از Skeleton و `dynamic()` برای بهبود ادراک کارایی
- [ ] عدم بلاک شدن UI در عملیات فیک طولانی (setTimeout)

### مسیرها و صفحات پیشنهادی (Next.js app dir)
- [ ] `/crm/leads` – لیست سرنخ‌ها
- [ ] `/crm/leads/[id]` – جزئیات سرنخ
- [ ] `/crm/opportunities` – کانبان فرصت‌ها
- [ ] `/crm/contacts` – مخاطبین
- [ ] `/intranet` – فید سازمانی
- [ ] `/intranet/messages` – گفتگوها
- [ ] `/hr/announcements` – اعلانات HR
- [ ] `/finance/invoices` – لیست فاکتورها
- [ ] `/finance/invoices/[id]` – جزئیات فاکتور
- [ ] `/marketing/campaigns` – کمپین‌ها
- [ ] `/settings/profile` – پروفایل
- [ ] `/settings/users` – مدیریت کاربران
- [ ] `/settings/roles` – نقش‌ها و مجوزها
- [ ] `/settings/companies` – شرکت‌ها
- [ ] `/switch-company` – انتخاب شرکت (در صورت نیاز صفحه مستقل)

### تحویل‌پذیری هر صفحه
- [ ] State مستقل، UI کامل، Loading/Empty/Error، داده فیک، تست دستی سناریوها
- [ ] لینک‌های ناوبری سالم و سازگار با مجوزها و شرکت فعال

### نکات تکمیلی
- [ ] عدم اتکا به هرگونه API واقعی؛ فقط Placeholder برای آینده
- [ ] مستندسازی کوتاه استفاده از داده‌های فیک در README
- [ ] تطبیق نام منوها با زبان کسب‌وکار کاربر و ساختار فعلی


### موارد انجام‌شده
- [x] چندشرکتی: Provider، سوییچر شرکت در هدر، فیلتر داده‌ها
- [x] ریسپانسیو: سایدبار موبایل به‌صورت Overlay + BottomNav موبایل
- [x] مجوزها: PermissionsProvider + پنهان‌سازی منو بر اساس can()
- [x] دسترسی: AccessGuard و صفحه عدم دسترسی فرانت
- [x] رفع دوبار لِیوت در صفحات متعدد (Workflows، Dashboard و ...)
- [x] ایجاد مسیرهای آینه‌ای در روت برای صفحات `mobleman-tehran/*`
- [x] بهبود کلی ریسپانسیو: حذف اسکرول افقی سراسری، کنترل عرض جدول‌ها
- [x] منوی اعلان‌ها: بازشدن به سمت راست و سازگار با موبایل
- [x] سایدبار موبایل: بستن خودکار بعد از ناوبری
- [x] CRM - سرنخ‌ها: `/crm/leads` و جزئیات `/crm/leads/[id]`
- [x] CRM - فرصت‌ها (کانبان): `/crm/opportunities` با درگ‌-اند-دراپ فیک
- [x] CRM - مخاطبین: `/crm/contacts` و جزئیات `/crm/contacts/[id]`
- [x] ارتباط داخلی: فید اعلانات `/intranet` و گفتگوها `/intranet/messages`
- [x] مالی - فاکتورها: لیست `/finance/invoices` و جزئیات `/finance/invoices/[id]`
- [x] مارکتینگ - کمپین‌ها: لیست `/marketing/campaigns` و جزئیات `[id]`
- [x] تنظیمات - نقش‌ها/مجوزها: `/settings/roles` با ماتریس مجوز فیک
- [x] به‌روزرسانی منو مطابق ماژول‌های پیاده‌سازی‌شده
- [ ] دارک مود (لغو شد بنا به درخواست)

